<% bg_collapsed ||= 'bg-secondary' %>
<% bg_open ||= 'bg-success' %>
<% p_x ||= '' %>
<% card_p_x ||= '' %>
<% card_body_p_x ||= "" %>
<% text_collapsed ||= 'text-white' %>
<% text_open ||= 'text-white' %>
<% header_text_x ||= 'text-lg' %>
<% header_p_x ||= 'p-2' %>
<% clickable_header ||= false %>
<div class="card h-100 shadow <%=card_p_x%>"
  data-controller="collapsible-sections"
  data-collapsible-sections-target="section"
  data-collapsible-sections-open-value=<%=bg_open%>
  data-collapsible-sections-closed-value=<%=bg_collapsed%>
  data-collapsible-sections-text-open-value=<%=text_open%>
  data-collapsible-sections-text-closed-value=<%=text_collapsed%>
  >
  <div class="card-header <%=clickable_header ? 'clickable' : '' %> <%= collapsed ? "#{bg_collapsed} rounded" : bg_open %> <%= p_x %>">
    <h2 class="mb-0">
      <div class="<%=header_text_x%> <%=header_p_x%> <%=collapsed ? text_collapsed : text_open %> text-decoration-none w-100" data-collapsible-sections-target="button" >
        <div class="d-flex justify-content-between">
          <% if block_given? %>
            <%= yield %>
          <% else %>
            <div>
              <%= section_title %>
            </div>
          <% end %>
          <div data-action = "click->collapsible-sections#toggleCollapse"><i class="clickable fas fa-<%= collapsed ? 'plus' : 'minus'%>"></i></div>
        </div>
      </div>
    </h2>
  </div>
  <div class="collapse <%= collapsed ? '' : 'show' %>">
    <div class="card-body <%=card_body_p_x%>">
      <%= render section_partial, section_partial_params %>
    </div>
  </div>
</div>
